#!/bin/bash
#
# Map function for bash.
# ----------------------
# Courtesy downdiagonal on reddit.
# http://www.reddit.com/r/linux/comments/akt3j
#
# Usage:
# ------
# map COMMAND: ITEM1 ITEM2 ITEM3
#
# Example:
# --------
# map unrar x: *.rar

command=''
if [ $# -lt 2 ] || [[ ! "$@" =~ :[[:space:]] ]];then
    echo "Invalid syntax." >&2; return 1 
fi
until [[ $1 =~ : ]]; do
    command="$command $1"; shift
done
command="$command ${1%:}"; shift
for i in "$@"; do
    eval "${command//\\/\\\\} \"${i//\\/\\\\}\""
done
