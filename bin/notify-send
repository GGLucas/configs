#!/bin/bash

# Escape problematic characters
escape() {
    t=$@
    t=${t//\\/\\\\}
    t=${t//\"/\\\"}
    t=${t//\\\\n/\\n}
    echo $t
}

# Use a default title
if [[ $2 ]]
then
    title=$(escape $1)
    text=$(escape $2)
else
    title="Notification"
    text=$(escape $1)
fi

# Default colors
bg='nil'
fg='nil'

# Use different colors for different things
if [[ "$title" == "newsbeuter" ]]; then
    # Newsbeuter
    bg='"#547045"'
    fg='"#ffffff"'
fi

echo "naughty.notify { title=\"$title\", text=\"$text\", bg=$bg, fg=$fg }" >> /tmp/awesome-remote
